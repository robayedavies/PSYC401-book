<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>visualization-intro</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="visualization-intro_files/libs/clipboard/clipboard.min.js"></script>
<script src="visualization-intro_files/libs/quarto-html/quarto.js"></script>
<script src="visualization-intro_files/libs/quarto-html/popper.min.js"></script>
<script src="visualization-intro_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="visualization-intro_files/libs/quarto-html/anchor.min.js"></script>
<link href="visualization-intro_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="visualization-intro_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="visualization-intro_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="visualization-intro_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="visualization-intro_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">



<section id="sec-vis-intro-intro" class="level1">
<h1>Hypotheses and associations</h1>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>Under construction</p>
</div>
</div>
<section id="sec-associations-overview" class="level2">
<h2 class="anchored" data-anchor-id="sec-associations-overview">Overview</h2>
<p>Welcome to our overview of the materials you will work with in our data analysis class in the <em>PSYC401</em> module, Week 7.</p>
<p>We are completing five classes together in weeks 6-10. These classes are designed to help students to learn about some very common and powerful psychological data analysis methods. We will focus on methods that allow us to visualize and make sense of evidence for <strong>associations</strong> between variables. Our materials are designed to help you to think about what you are doing, to understand the aims of the practical steps.</p>
<p>We will do this in the context of a live research project with potential real world impacts: the <em>Clearly understood</em> project. We will present our PSYC401 lessons in the context of this research project because we think that this <strong>context</strong> will help you to make sense of the data, and to see why we ask you to practise the skills we are teaching.</p>
<p>We encounter written health information all the time: on medication labels, in letters from doctors, and online when we research things we are worried about. It is not always easy to understand this information.</p>
<p>It is unclear how to make health communication more effective. The problem is that we are not sure how health information should be communicated so that everyone can understand it. This is why we ask the research questions:</p>
<ol type="1">
<li>What person attributes predict success in understanding?</li>
<li>Can people accurately evaluate whether they correctly understand written health information?</li>
</ol>
<p>As we work together, we will be revisiting some of the ideas and techniques you have seen in previous classes. This is to give you the opportunity to consolidate your learning. We will be extending your development with some new ideas to strengthen your skills.</p>
</section>
<section id="sec-associations-goals" class="level2">
<h2 class="anchored" data-anchor-id="sec-associations-goals">Our learning goals</h2>
<p>This week, we focus on both developing your critical thinking and strengthening your practical skills in data analysis.</p>
<p><strong>1. Critical thinking</strong></p>
<ul>
<li><em>Concepts</em>: begin with critical thinking</li>
<li><em>Skills</em>: developing hypotheses</li>
</ul>
<p><strong>2. Practical skills</strong></p>
<ul>
<li><em>Concepts</em> – associations: correlations, estimates and hypothesis tests</li>
<li><em>Skills</em> – visualizing variation and covariation</li>
<li><em>Skills</em> – writing the code</li>
<li><em>Skills</em> – estimating correlations</li>
<li><em>Skills</em> – hypothesis tests for correlations</li>
<li><em>Skills</em> – interpreting and reporting correlations</li>
</ul>
</section>
<section id="sec-associations-resources" class="level2">
<h2 class="anchored" data-anchor-id="sec-associations-resources">Learning resources</h2>
<p>You will see <em>next</em> links to the lectures we created to explain the concepts behind the critical thinking and analysis skills we want you to develop (<a href="#sec-associations-lectures">Section&nbsp;1.3.1</a>), <em>then</em> information about the practical materials we have provided to help you to practise your skills (<a href="#sec-associations-practical">Section&nbsp;1.3.2</a>).</p>
<p>All the links to the lecture videos, the lecture slides, and everything you need for your practical work can <em>also</em> be found in the Week 7 files folder on Moodle <a href="https://modules.lancaster.ac.uk/course/view.php?id=40622#coursecontentcollapse8" target="_blank">here</a></p>
<p>In <a href="#sec-associations-notes">Section&nbsp;1.4</a>, we present the lecture slide points. We do this here because we can share the code we used to generate the plots we use in some of the slides <a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
<section id="sec-associations-lectures" class="level3">
<h3 class="anchored" data-anchor-id="sec-associations-lectures">Lectures</h3>
<p>The lecture material for this week is presented in five short parts. Click on a link and your browser should open a tab showing the <em>Panopto</em> video for the lecture part.</p>
<p><a href="https://lancaster.cloud.panopto.eu/Panopto/Pages/Viewer.aspx?id=3e5f2ca1-fc6d-4e31-8f7c-af5000c9916f" target="_blank">Part 1 of 5</a></p>
<p><a href="https://lancaster.cloud.panopto.eu/Panopto/Pages/Viewer.aspx?id=9a10462c-e185-4069-b72a-af5000cc076a" target="_blank">Part 2 of 5</a></p>
<p><a href="https://lancaster.cloud.panopto.eu/Panopto/Pages/Viewer.aspx?id=1653a285-fa5b-45c4-a850-af5000d1c8d5" target="_blank">Part 3 of 5</a></p>
<p><a href="https://lancaster.cloud.panopto.eu/Panopto/Pages/Viewer.aspx?id=ca174423-d385-40d5-9068-af5000d60688" target="_blank">Part 4 of 5</a></p>
<p><a href="https://lancaster.cloud.panopto.eu/Panopto/Pages/Viewer.aspx?id=9d53628e-3133-43aa-b78f-af5000dc0d0b" target="_blank">Part 5 of 5</a></p>
<p>You can download the slides we presented in the lecture in two different formats, depending on what you think will be most useful to you:</p>
<ul>
<li>Download the slides exactly as they appear in the lecture from <a href="files/401-hypotheses-assocations.html">this link</a>. The .html file can be opened and viewed in any web browser (e.g., Chrome, Firefox, Safari).</li>
<li>Or you can download a printable Word .docx presentation of the slides from <a href="files/401-hypotheses-associations-printable-edited.docx">this link</a>. The .docx can be opened in Microsoft Word. The figures will not appear exactly as they do in the lecture recording because Word cannot cope with images so well but the trade-off is that you get a document you can print and edit to add notes.</li>
</ul>
<!-- ## Pre-lab activity 1 -->
<!-- In weeks 16-19, we will be working together on a research project to investigate how people vary in their response to health advice. -->
<!-- Completing the project involves collecting responses from PSYC122 students. -->
<!-- In our class activities, we can then analyze the data we collect. -->
<!-- To enter your responses, we invite you to complete a short survey. -->
<!-- You can complete the survey here (just click on the web address to get started): -->
<!-- [Complete the survey](https://lancasteruni.eu.qualtrics.com/jfe/form/SV_0ww8HHxx172TPJs){target="_blank"} -->
<!-- ### Survey information -->
<!-- The survey asks you to: -->
<!-- - complete some questions about who you are; -->
<!-- - and then answer some questions about what you know about some English words, about what you know about health matters, and about how you approach reading. -->
<!-- The survey then asks you to: -->
<!-- - read five short extracts from patient information leaflets about different kinds of health issue; -->
<!-- - respond to some multiple choice questions about each extract; -->
<!-- - and rate how well you think you understand the advice. -->
<!-- The survey should take about 20 minutes to complete. -->
<!-- Some people will take less time, and some people might take a little more time. -->
<!-- Taking part in the survey is **completely voluntary**. -->
<!-- You can stop at any time without completing the survey if you do not want to finish it. -->
<!-- If you do not want to do the survey, you can do an alternative activity (see below). -->
<!-- All responses will be recorded completely anonymously. -->
<!-- ## Pre-lab activity 1 alternative -->
<!-- If you do not want to complete the survey, we invite you to read the pre-registered research plan for the *PSYC122 health advice* research project. -->
<!-- [Read the project pre-registration](https://osf.io/p6fsc/){target="_blank"} -->
</section>
<section id="sec-associations-practical" class="level3">
<h3 class="anchored" data-anchor-id="sec-associations-practical">Practical materials</h3>
<p>We have collected the practical materials together into a folder.</p>
<p>The folder includes the data files:</p>
<ul>
<li><code>study-one-general-participants.csv</code></li>
<li><code>study-two-general-participants.csv</code></li>
</ul>
<p>and .R code files:</p>
<ul>
<li><code>401-associations-how-to.R</code></li>
<li><code>401-associations-workbook.R</code></li>
</ul>
<p>You will use these files for your practical learning.</p>
<p>You can download the .R files and the data .csv files in a single folder, using the link <a href="files/PSYC401_week7_materials.zip">here</a>.</p>
<p>Or you can download the files as individual files from the module <a href="https://modules.lancaster.ac.uk/course/view.php?id=40622#coursecontentcollapse8" target="_blank">Moodle page for PSYC401</a>.</p>
<p>Once you have downloaded the file folder, you will need to upload it to the R-Studio server to access and use the R files.</p>
<section id="sec-associations-practical-how-to" class="level4">
<h4 class="anchored" data-anchor-id="sec-associations-practical-how-to">The how-to guide</h4>
<p>In the <code>how-to</code> guide:</p>
<ul>
<li><code>401-associations-how-to.R</code></li>
</ul>
<p>we show you how to do everything you need to do in the practical workbook (see <a href="#sec-associations-practical-workbook">Section&nbsp;1.3.3</a>). The guide comprises an .R file <code>401-associations-how-to.R</code> with code and advice.</p>
<p>The code in the .R file was written to work with the data file</p>
<ul>
<li><code>study-one-general-participants.csv</code>.</li>
</ul>
<!-- In the video, I work my way through the R code, step-by-step, explaining what each line of code does. -->
<!-- Watching the video takes about 20 minutes. -->
<!-- It is completely optional but I have provided the video because students have told us they find it useful. -->
<!-- [Watch the how-to guide](https://dtu-panopto.lancs.ac.uk/Panopto/Pages/Viewer.aspx?id=fc290f97-5085-4b92-8870-ae3f01294230){target="_blank"} -->
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p>Work through the steps in the <code>how-to</code> guide first, this practice will help you to understand what you need to do for the <code>workbook</code> tasks.</p></li>
<li><p>The <code>how-to</code> guide and the <code>workbook</code> have similar structures. This is intentional: so that you can copy and <em>adapt</em> code from the <code>how-to</code> guide to do the practical tasks in the <code>workbook</code>.</p></li>
</ul>
</div>
</div>
</section>
</section>
<section id="sec-associations-practical-workbook" class="level3">
<h3 class="anchored" data-anchor-id="sec-associations-practical-workbook">The workbook</h3>
<p>In the <code>workbook</code>:</p>
<ul>
<li><code>401-associations-workbook.R</code></li>
</ul>
<p>you will work with the data file</p>
<ul>
<li><code>study-two-general-participants.csv</code></li>
</ul>
<p>We split .R scripts into parts, tasks and questions:</p>
<ul>
<li>different parts for different phases of the analysis workflow;</li>
<li>different tasks for different steps in each phase;</li>
<li>different questions to examine different ideas or coding steps.</li>
</ul>
<p>In the week 7 workbook, we are going to work through the following workflow steps:</p>
<ol type="1">
<li>Empty the R environment – using <code>rm(list=ls())</code></li>
<li>Load relevant libraries – using <code>library()</code></li>
<li>Read in the data file – using <code>read_csv()</code></li>
<li>Inspect the data – using <code>head()</code> and <code>summary()</code></li>
<li>Change the type classification of a variable in the data – using <code>as.factor()</code></li>
<li>Draw histograms to examine the distributions of variables – using <code>ggplot()</code> and <code>geom_histogram()</code></li>
<li>Draw scatterplots to examine the association between pairs of variables – using <code>ggplot()</code> and <code>geom_point()</code></li>
<li>Estimate and test the correlations between pairs of variables – using <code>cor.test()</code></li>
</ol>
<p>The activity <code>401-associations-workbook.R</code> file takes you through the tasks, one by one.</p>
<p>If you are unsure about what you need to do, check the advice in <code>401-associations-how-to.R</code>.</p>
<p>You will see that you can match a task in the <code>activity</code> to the same task in the <code>how-to</code>. The <code>how-to</code> shows you what function you need and how you should write the function code. You will need to change the names of the data-set or the variables to complete the tasks in the activity.</p>
<p>This process of adapting demonstration code is a process critical to data literacy and to effective problem solving in working with data in psychological science.</p>
</section>
<section id="the-data-files" class="level3">
<h3 class="anchored" data-anchor-id="the-data-files">The data files</h3>
<p>Each of the data files we will work with has a similar structure.</p>
<p>Here are what the first few rows in the data file <code>study.two.gen</code> looks like:</p>
<div class="cell">
<div class="cell-output-display">
<table data-quarto-postprocess="true" class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">participant_ID</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">mean.acc</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">mean.self</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">study</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">AGE</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">SHIPLEY</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">HLVA</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">FACTOR3</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">QRITOTAL</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">GENDER</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">EDUCATION</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">ETHNICITY</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">studytwo.1</td>
<td style="text-align: right;">0.4107143</td>
<td style="text-align: right;">6.071429</td>
<td style="text-align: left;">studytwo</td>
<td style="text-align: right;">26</td>
<td style="text-align: right;">27</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">50</td>
<td style="text-align: right;">9</td>
<td style="text-align: left;">Female</td>
<td style="text-align: left;">Higher</td>
<td style="text-align: left;">Asian</td>
</tr>
<tr class="even">
<td style="text-align: left;">studytwo.10</td>
<td style="text-align: right;">0.6071429</td>
<td style="text-align: right;">8.500000</td>
<td style="text-align: left;">studytwo</td>
<td style="text-align: right;">38</td>
<td style="text-align: right;">24</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">58</td>
<td style="text-align: right;">15</td>
<td style="text-align: left;">Female</td>
<td style="text-align: left;">Secondary</td>
<td style="text-align: left;">White</td>
</tr>
<tr class="odd">
<td style="text-align: left;">studytwo.100</td>
<td style="text-align: right;">0.8750000</td>
<td style="text-align: right;">8.928571</td>
<td style="text-align: left;">studytwo</td>
<td style="text-align: right;">66</td>
<td style="text-align: right;">40</td>
<td style="text-align: right;">13</td>
<td style="text-align: right;">60</td>
<td style="text-align: right;">20</td>
<td style="text-align: left;">Female</td>
<td style="text-align: left;">Higher</td>
<td style="text-align: left;">White</td>
</tr>
<tr class="even">
<td style="text-align: left;">studytwo.101</td>
<td style="text-align: right;">0.9642857</td>
<td style="text-align: right;">8.500000</td>
<td style="text-align: left;">studytwo</td>
<td style="text-align: right;">21</td>
<td style="text-align: right;">31</td>
<td style="text-align: right;">11</td>
<td style="text-align: right;">59</td>
<td style="text-align: right;">14</td>
<td style="text-align: left;">Female</td>
<td style="text-align: left;">Higher</td>
<td style="text-align: left;">White</td>
</tr>
<tr class="odd">
<td style="text-align: left;">studytwo.102</td>
<td style="text-align: right;">0.7142857</td>
<td style="text-align: right;">7.071429</td>
<td style="text-align: left;">studytwo</td>
<td style="text-align: right;">74</td>
<td style="text-align: right;">35</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">52</td>
<td style="text-align: right;">18</td>
<td style="text-align: left;">Male</td>
<td style="text-align: left;">Higher</td>
<td style="text-align: left;">White</td>
</tr>
<tr class="even">
<td style="text-align: left;">studytwo.103</td>
<td style="text-align: right;">0.7678571</td>
<td style="text-align: right;">5.071429</td>
<td style="text-align: left;">studytwo</td>
<td style="text-align: right;">18</td>
<td style="text-align: right;">40</td>
<td style="text-align: right;">11</td>
<td style="text-align: right;">54</td>
<td style="text-align: right;">15</td>
<td style="text-align: left;">Female</td>
<td style="text-align: left;">Further</td>
<td style="text-align: left;">White</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>You can see the columns:</p>
<ul>
<li><code>participant_ID</code> participant code</li>
<li><code>mean.acc</code> average accuracy of response to questions testing understanding of health guidance</li>
<li><code>mean.self</code> average self-rated accuracy of understanding of health guidance</li>
<li><code>study</code> variable coding for what study the data were collected in</li>
<li><code>AGE</code> age in years</li>
<li><code>HLVA</code> health literacy test score</li>
<li><code>SHIPLEY</code> vocabulary knowledge test score</li>
<li><code>FACTOR3</code> reading strategy survey score</li>
<li><code>GENDER</code> gender code</li>
<li><code>EDUCATION</code> education level code</li>
<li><code>ETHNICITY</code> ethnicity (Office National Statistics categories) code</li>
</ul>
</section>
<section id="the-answers" class="level3">
<h3 class="anchored" data-anchor-id="the-answers">The answers</h3>
<p>After the practical class, you will be able to download the answers version of the <code>workbook</code> here.</p>
<!-- [401-associations-workbook-answers.R](files/401-associations-workbook-answers.R) -->
<p>The answers version will present my answers for questions, and some extra information where that is helpful.</p>
</section>
</section>
<section id="sec-associations-notes" class="level2">
<h2 class="anchored" data-anchor-id="sec-associations-notes">Lecture notes</h2>
<p>Some people find it easier to read notes than to watch video recordings. This is why we also include the lecture notes here.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>In these notes, I provide notes on the code steps that result in the plot.</p>
<ul>
<li>Click on the <code>Notes</code> tab to see them.</li>
</ul>
</div>
</div>
<section id="better-methods-cant-make-up-for-mediocre-theory" class="level3">
<h3 class="anchored" data-anchor-id="better-methods-cant-make-up-for-mediocre-theory">Better methods can’t make up for mediocre theory</h3>
<ul>
<li><em>Previously</em> – in week 6: I talked about improving science through open <em>reproducible</em> methods but we cannot make progress without better theory and data <span class="citation" data-cites="smaldino2019better">[@smaldino2019better]</span></li>
<li>We want open reproducible findings but we do not just want reproducibility</li>
<li>We want to make sense of people in useful ways</li>
</ul>
</section>
<section id="open-reproducible-methods-are-not-enough" class="level3">
<h3 class="anchored" data-anchor-id="open-reproducible-methods-are-not-enough">Open, reproducible, methods are not enough</h3>
<ul>
<li><strong>Now</strong>: we need to think causally about predictions and about measurement</li>
<li>We discuss health comprehension project to demonstrate critical self-reflection</li>
</ul>
<ol type="1">
<li>For useful hypotheses, we need better theory so we can build clear testable predictions from explicit assumptions</li>
<li>And with better models, we need better measurement because if we cannot reliably measure something then it is hard to build a theory about it</li>
</ol>
</section>
<section id="critical-thinking-and-you" class="level3">
<h3 class="anchored" data-anchor-id="critical-thinking-and-you">Critical thinking and you</h3>
<ul>
<li>Students and colleagues almost never have problems <em>coding</em> analyses in R</li>
<li>The challenges are <em>almost always</em> located in the critical reflection you must do in order to develop sensible analysis, and to interpret the analysis results</li>
<li>So we need to start by highlighting the work of critical reflection in data analysis</li>
</ul>
</section>
<section id="why-most-psychological-research-findings-are-not-even-wrong" class="level3">
<h3 class="anchored" data-anchor-id="why-most-psychological-research-findings-are-not-even-wrong">Why most psychological research findings are not even wrong</h3>
<ul>
<li>As you will know, it is often difficult to identify a claim in an article <span class="citation" data-cites="scheel2022">[@scheel2022]</span></li>
<li>Here are some questions you can ask to decide if a claim <em>you read or make</em> is clear:</li>
</ul>
<ol type="1">
<li>Is the claim stated unambiguously: can the claim support or contradict (or is it uncertain about) a prediction?</li>
<li>Can you understand how we get back from the claim to the data, given assumptions about measurement, sampling and procedure?</li>
</ol>
</section>
<section id="why-hypothesis-testers-should-spend-less-time-testing-hypotheses" class="level3">
<h3 class="anchored" data-anchor-id="why-hypothesis-testers-should-spend-less-time-testing-hypotheses">Why hypothesis testers should spend less time testing hypotheses</h3>
<ul>
<li>The response to crisis has been to teach and use better methods</li>
<li>This improvement reveals a core problem <span class="citation" data-cites="scheel2021">[@scheel2021]</span>: we often work to test hypotheses but our hypotheses are often <em>undeveloped</em></li>
<li>We train hypothesis testing but we also need to train <em>hypothesising</em>:</li>
<li>how to measure, operationalize, and how to decide if hypothesis is corroborated or not</li>
</ul>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>We want to be capable of being wrong</p>
</div>
</div>
</section>
<section id="statistical-rituals-largely-eliminate-critical-statistical-thinking" class="level3">
<h3 class="anchored" data-anchor-id="statistical-rituals-largely-eliminate-critical-statistical-thinking">Statistical rituals largely eliminate critical statistical <em>thinking</em></h3>
<ul>
<li>Traditionally, students learn statistical tests, and learn to identify if a test statistic is significance or not</li>
<li>If we do not also talk about what is actually observed, and whether or how – or why – it is or is not compatible with theory based predictions then we do <em>ritual not science</em> <span class="citation" data-cites="Gigerenzer2004">[@Gigerenzer2004]</span></li>
<li>This is a problem: the focus on anything-but-null allows us to build or accommodate vague theories that can never be wrong</li>
</ul>
</section>
<section id="we-need-to-think-about-the-derivation-chain" class="level3">
<h3 class="anchored" data-anchor-id="we-need-to-think-about-the-derivation-chain">We need to think about the derivation chain</h3>
<div class="cell">
<div class="cell-output-display">
<div id="fig-derivation-chain" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<div>
<svg width="672" height="480" viewbox="0.00 0.00 291.19 280.00" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" style="; max-width: none; max-height: none">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 276)">
<title>
Q
</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-276 287.19,-276 287.19,4 -4,4"></polygon> <g id="clust1" class="cluster">
<title>
cluster_R
</title>
<polygon fill="none" stroke="black" points="8,-211 8,-264 256,-264 256,-211 8,-211"></polygon> </g> <!-- nd_1_l --> <g id="node1" class="node">
<title>
nd_1_l
</title>
<polygon fill="none" stroke="black" points="16.32,-219.5 16.32,-255.5 137.68,-255.5 137.68,-219.5 16.32,-219.5"></polygon> <text text-anchor="middle" x="77" y="-233.3" font-family="Times,serif" font-size="14.00">Concept formation</text> </g> <!-- nd_1_r --> <g id="node2" class="node">
<title>
nd_1_r
</title>
<polygon fill="none" stroke="black" points="155.7,-219.5 155.7,-255.5 248.3,-255.5 248.3,-219.5 155.7,-219.5"></polygon> <text text-anchor="middle" x="202" y="-233.3" font-family="Times,serif" font-size="14.00">Causal model</text> </g> <!-- nd_2_l --> <g id="node3" class="node">
<title>
nd_2_l
</title>
<polygon fill="none" stroke="black" points="30.9,-146.5 30.9,-182.5 123.1,-182.5 123.1,-146.5 30.9,-146.5"></polygon> <text text-anchor="middle" x="77" y="-160.3" font-family="Times,serif" font-size="14.00">Measurement</text> </g> <!-- nd_1_l&#45;&gt;nd_2_l --> <g id="edge1" class="edge">
<title>
nd_1_l-&gt;nd_2_l
</title>
<path fill="none" stroke="black" d="M77,-219.31C77,-211.29 77,-201.55 77,-192.57"></path> <polygon fill="black" stroke="black" points="80.5,-192.53 77,-182.53 73.5,-192.53 80.5,-192.53"></polygon> </g> <!-- nd_3 --> <g id="node5" class="node">
<title>
nd_3
</title>
<polygon fill="none" stroke="black" points="75.54,-73.5 75.54,-109.5 212.46,-109.5 212.46,-73.5 75.54,-73.5"></polygon> <text text-anchor="middle" x="144" y="-87.3" font-family="Times,serif" font-size="14.00">Statistical predictions</text> </g> <!-- nd_2_l&#45;&gt;nd_3 --> <g id="edge2" class="edge">
<title>
nd_2_l-&gt;nd_3
</title>
<path fill="none" stroke="black" d="M93.22,-146.31C101.53,-137.5 111.8,-126.63 120.92,-116.96"></path> <polygon fill="black" stroke="black" points="123.61,-119.2 127.93,-109.53 118.52,-114.4 123.61,-119.2"></polygon> </g> <!-- nd_2_r --> <g id="node4" class="node">
<title>
nd_2_r
</title>
<polygon fill="none" stroke="black" points="140.81,-146.5 140.81,-182.5 283.19,-182.5 283.19,-146.5 140.81,-146.5"></polygon> <text text-anchor="middle" x="212" y="-160.3" font-family="Times,serif" font-size="14.00">Auxiliary assumptions</text> </g> <!-- nd_2_r&#45;&gt;nd_3 --> <g id="edge4" class="edge">
<title>
nd_2_r-&gt;nd_3
</title>
<path fill="none" stroke="black" d="M195.54,-146.31C187.1,-137.5 176.68,-126.63 167.42,-116.96"></path> <polygon fill="black" stroke="black" points="169.75,-114.33 160.31,-109.53 164.7,-119.17 169.75,-114.33"></polygon> </g> <!-- nd_4 --> <g id="node6" class="node">
<title>
nd_4
</title>
<polygon fill="none" stroke="black" points="82.15,-0.5 82.15,-36.5 205.85,-36.5 205.85,-0.5 82.15,-0.5"></polygon> <text text-anchor="middle" x="144" y="-14.3" font-family="Times,serif" font-size="14.00">Testing hypotheses</text> </g> <!-- nd_3&#45;&gt;nd_4 --> <g id="edge3" class="edge">
<title>
nd_3-&gt;nd_4
</title>
<path fill="none" stroke="black" d="M144,-73.31C144,-65.29 144,-55.55 144,-46.57"></path> <polygon fill="black" stroke="black" points="147.5,-46.53 144,-36.53 140.5,-46.53 147.5,-46.53"></polygon> </g> </g>
</svg>
</div>
<figcaption class="figure-caption">Figure&nbsp;1: The derivation chain</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="heres-a-toolkit-for-thinking-productively-about-your-hypotheses" class="level3">
<h3 class="anchored" data-anchor-id="heres-a-toolkit-for-thinking-productively-about-your-hypotheses">Here’s a toolkit for thinking productively about your hypotheses</h3>
<!-- scheel et al 2021 Why Hypothesis Testers Should Spend Less Time Testing Hypotheses.pdf -->
<!-- - concept formation is the process of defining the building blocks of theories and specifying their attributes -->
<!-- - we need to specify how they will be measured and understand what these measures mean -->
<!-- - if concepts are sufficiently defined, we need to specify a causal model of how they relate to one another -->
<!-- - good theory is clear about its boundary conditions -->
<!-- - auxiliary assumptions are claims not directly derived from our theory but that are necessary for translating statements about theoretical constructs into statements about observables -->
<!-- - inferences we can draw from statistical tests depend on the specificity of the theoretical predictions and on the capacity of tests to falsify them -- when preregistering confirmatory analyses, researchers should specify which findings would support and falsify their hypotheses and indicate the test’s capacity to provide informative results -->
<p>The derivation chain <span class="citation" data-cites="meehl1990 scheel2021">[@meehl1990; @scheel2021]</span></p>
<ol type="1">
<li>Develop your theory: the concepts, and the assumptions about causality</li>
<li>Specify how psychological concepts will be measured</li>
<li>Identify auxiliary assumptions about how we get from theoretical concepts to observable data</li>
<li>Identify theoretical predictions</li>
<li>Link theoretical predictions to specific statistical tests that may support or contradict them</li>
</ol>
</section>
<section id="valid-measures" class="level3">
<h3 class="anchored" data-anchor-id="valid-measures">Valid measures</h3>
<ul>
<li>We often teach and learn about different kinds of validity but the key idea is simple <span class="citation" data-cites="borsboom2004">[@borsboom2004]</span></li>
</ul>
<blockquote class="blockquote">
<p>a test is valid for measuring an attribute if and only if (a) the attribute exists and (b) variations in the attribute causally produce variations in the outcomes of the measurement procedure</p>
</blockquote>
<ul>
<li>We want to work with valid measures but <em>validity</em> requires explaining: (Q.1) Does the thing exist in the world? (Q.2) Is variation in that thing be reflected in variation in our measurement?</li>
</ul>
</section>
<section id="summary-our-critical-thinking-checklist" class="level3">
<h3 class="anchored" data-anchor-id="summary-our-critical-thinking-checklist">Summary: our critical thinking checklist</h3>
<ul>
<li>What is our (causal) theory?</li>
<li>What measures are we using, why?</li>
<li>What is our specific prediction, why?</li>
<li>Does the prediction relate to sign and to magnitude?</li>
<li>What analysis can test this prediction, why?</li>
<li>How will our results affect our beliefs, why?</li>
</ul>
</section>
<section id="case-study-the-health-comprehension-project" class="level3">
<h3 class="anchored" data-anchor-id="case-study-the-health-comprehension-project">Case study: the health comprehension project</h3>
<ul>
<li>Because the important questions concern how psychologists ask and answer research questions</li>
<li>We will work in the context of a live research project: <em>What makes it easy or difficult to understand written health information?</em></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="nurse-patient-talk.png" class="img-fluid figure-img" alt="flickr: Sasin Tipchair 'Senior woman in wheelchair talking to a nurse in a hospital'"></p>
<figcaption class="figure-caption">flickr: Sasin Tipchair ‘Senior woman in wheelchair talking to a nurse in a hospital’</figcaption>
</figure>
</div>
<p>Why this? We don’t really know what makes it easy or difficult to understand advice about health</p>
</section>
<section id="health-comprehension-project-impacts" class="level3">
<h3 class="anchored" data-anchor-id="health-comprehension-project-impacts">Health comprehension project: impacts</h3>
<ul>
<li>We are working to help improve communication</li>
<li>With partners at Vienna Business University, Kantar Public, and the London School of Economics</li>
<li>Our work has implications for: business communication; understanding reading development; marketing communication</li>
</ul>
</section>
<section id="health-comprehension-project-questions-and-analyses" class="level3">
<h3 class="anchored" data-anchor-id="health-comprehension-project-questions-and-analyses">Health comprehension project: questions and analyses</h3>
<ul>
<li>Our research questions are:</li>
</ul>
<ol type="1">
<li>What person attributes predict success in understanding?</li>
<li>Can people accurately evaluate whether they correctly understand written health information?</li>
</ol>
<ul>
<li>These kinds of research questions can be answered using methods like <strong>correlation, linear models</strong></li>
</ul>
</section>
<section id="health-comprehension-project-relevance-methods-you-will-use-in-your-professional-work" class="level3">
<h3 class="anchored" data-anchor-id="health-comprehension-project-relevance-methods-you-will-use-in-your-professional-work">Health comprehension project – relevance: methods you will use in your professional work</h3>
<ul>
<li>We got funding to collect data online using online Qualtrics questionnaire surveys</li>
<li>We tested people on a range of dimensions using standardized ability and our own knowledge tests</li>
<li>Many of you will go on to work with online surveys, and with data from standardized ability measures</li>
</ul>
</section>
<section id="health-comprehension-project-samples" class="level3">
<h3 class="anchored" data-anchor-id="health-comprehension-project-samples">Health comprehension project: samples</h3>
<ul>
<li>We collected data in two studies in 2020: using the online Prolific platform to recruit participants</li>
<li>We did several replication studies in student-led projects: we analyze the data in class</li>
</ul>
</section>
<section id="health-comprehension-project-why-it-is-a-case-study" class="level3">
<h3 class="anchored" data-anchor-id="health-comprehension-project-why-it-is-a-case-study">Health comprehension project: why it is a case study</h3>
<ul>
<li>The health project has strengths and limitations</li>
<li>We show how to identify and critically evaluate this project so you can do the same for your work</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="qualtrics-covid-quest-58-aspirin.png" class="img-fluid figure-img" alt="Extract from Qualtrics survey showing a sample written health information text extract, a multiple choice question probing understanding of the information in the extract, and a rating scale allowing participants to self-evaluate their understanding"></p>
<figcaption class="figure-caption">Extract from Qualtrics survey</figcaption>
</figure>
</div>
<!-- - gelman -- p.23 -- Data analysis reaches a dead end if we have poor data. There are some measurement problems that no amount of fixing and adjusting can solve. -->
</section>
<section id="cognitive-process-theory-of-comprehension-success" class="level3">
<h3 class="anchored" data-anchor-id="cognitive-process-theory-of-comprehension-success">Cognitive process theory of comprehension success</h3>
<ul>
<li>When skilled adult readers read and try to understand written text <span class="citation" data-cites="kintsch1994">[@kintsch1994]</span></li>
<li>They must recognize and access the meanings of words</li>
<li>Then use knowledge and reasoning to build an interpretation of what is in the text</li>
<li>Based on connecting the information in the text with what they already know</li>
</ul>
</section>
<section id="individual-differences-theory-of-comprehension-success" class="level3">
<h3 class="anchored" data-anchor-id="individual-differences-theory-of-comprehension-success">Individual differences theory of comprehension success</h3>
<ul>
<li>Successfully understanding text depends on (1.) language experience and (2.) reasoning ability <span class="citation" data-cites="freed2017">[@freed2017]</span></li>
</ul>
<div class="cell">
<div class="cell-output-display">
<div id="fig-comprehension-drivers" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<div>
<svg width="672" height="480" viewbox="0.00 0.00 335.68 98.00" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" style="; max-width: none; max-height: none">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 94)">
<title>
Q
</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-94 331.68,-94 331.68,4 -4,4"></polygon> <!-- nd_1_l --> <g id="node1" class="node">
<title>
nd_1_l
</title>
<path fill="none" stroke="black" d="M123.47,-90C123.47,-90 11.84,-90 11.84,-90 5.84,-90 -0.16,-84 -0.16,-78 -0.16,-78 -0.16,-66 -0.16,-66 -0.16,-60 5.84,-54 11.84,-54 11.84,-54 123.47,-54 123.47,-54 129.47,-54 135.47,-60 135.47,-66 135.47,-66 135.47,-78 135.47,-78 135.47,-84 129.47,-90 123.47,-90"></path> <text text-anchor="middle" x="67.66" y="-67.8" font-family="Times,serif" font-size="14.00">Language experience</text> </g> <!-- nd_2 --> <g id="node3" class="node">
<title>
nd_2
</title>
<path fill="none" stroke="black" d="M315.86,-63C315.86,-63 183.13,-63 183.13,-63 177.13,-63 171.13,-57 171.13,-51 171.13,-51 171.13,-39 171.13,-39 171.13,-33 177.13,-27 183.13,-27 183.13,-27 315.86,-27 315.86,-27 321.86,-27 327.86,-33 327.86,-39 327.86,-39 327.86,-51 327.86,-51 327.86,-57 321.86,-63 315.86,-63"></path> <text text-anchor="middle" x="249.5" y="-40.8" font-family="Times,serif" font-size="14.00">Comprehension outcome</text> </g> <!-- nd_1_l&#45;&gt;nd_2 --> <g id="edge1" class="edge">
<title>
nd_1_l-&gt;nd_2
</title>
<path fill="none" stroke="black" d="M135.37,-61.98C143.77,-60.72 152.47,-59.42 161.13,-58.12"></path> <polygon fill="black" stroke="black" points="161.9,-61.54 171.27,-56.59 160.86,-54.62 161.9,-61.54"></polygon> </g> <!-- nd_1_r --> <g id="node2" class="node">
<title>
nd_1_r
</title>
<path fill="none" stroke="black" d="M118.4,-36C118.4,-36 16.92,-36 16.92,-36 10.92,-36 4.92,-30 4.92,-24 4.92,-24 4.92,-12 4.92,-12 4.92,-6 10.92,0 16.92,0 16.92,0 118.4,0 118.4,0 124.4,0 130.4,-6 130.4,-12 130.4,-12 130.4,-24 130.4,-24 130.4,-30 124.4,-36 118.4,-36"></path> <text text-anchor="middle" x="67.66" y="-13.8" font-family="Times,serif" font-size="14.00">Reasoning capacity</text> </g> <!-- nd_1_r&#45;&gt;nd_2 --> <g id="edge2" class="edge">
<title>
nd_1_r-&gt;nd_2
</title>
<path fill="none" stroke="black" d="M130.3,-27.25C140.24,-28.75 150.69,-30.32 161.1,-31.88"></path> <polygon fill="black" stroke="black" points="160.64,-35.35 171.04,-33.37 161.67,-28.43 160.64,-35.35"></polygon> </g> </g>
</svg>
</div>
<figcaption class="figure-caption">Figure&nbsp;2: Factors influencing comprehension success</figcaption>
</figure>
</div>
</div>
</div>
<!-- ![Freed et al., 2017; structural equation model, adult reading comprehension](freed-2017-fig1-sem-model-1.png){fig-alt="Freed et al., 2017; structural equation model, adult reading comprehension"} -->
</section>
<section id="where-the-data-come-from-our-measures" class="level3">
<h3 class="anchored" data-anchor-id="where-the-data-come-from-our-measures">Where the data come from: our measures</h3>
<ul>
<li>We measure reading comprehension: asking people to read text and then answer multiple choice questions</li>
<li>We measure background knowledge: vocabulary knowledge (Shipley); health literacy (HLVA)</li>
<li>We ask people to rate their own understanding of each text</li>
</ul>
</section>
<section id="example-critical-evaluation-questions" class="level3">
<h3 class="anchored" data-anchor-id="example-critical-evaluation-questions">Example critical evaluation questions</h3>
<ul>
<li>Are multiple choice questions good ways to probe understanding? – What alternatives are there?</li>
<li>Are tests like the Shipley good measures of language knowledge? – What do we miss?</li>
<li>Can a person accurately evaluate their own understanding? – Can we rely on subjective judgments?</li>
</ul>
</section>
<section id="relevance-to-you" class="level3">
<h3 class="anchored" data-anchor-id="relevance-to-you">Relevance to you</h3>
<ul>
<li>Even very good students sometimes do not question the validity of measures:</li>
<li>Not asking questions like this has a real impact on the value of the interpretation of results</li>
<li>Here, we are looking ahead to the critical thinking you will need to do for your dissertations</li>
</ul>
</section>
<section id="talking-about-the-relationships-between-variables" class="level3">
<h3 class="anchored" data-anchor-id="talking-about-the-relationships-between-variables">Talking about the relationships between variables</h3>
<ul>
<li>Psychologists and people who work in related fields often want to know about <em>associations</em></li>
<li>Is variation in observed values on one dimension (e.g., comprehension) related to variation in another dimension (e.g., vocabulary)?</li>
<li>Do values on both dimensions <em>vary together</em>?</li>
</ul>
</section>
<section id="the-language-in-this-area-can-vary-we-will-be-consistent-but-you-need-to-be-aware-of-the-different-terms" class="level3">
<h3 class="anchored" data-anchor-id="the-language-in-this-area-can-vary-we-will-be-consistent-but-you-need-to-be-aware-of-the-different-terms">The language in this area can vary: we will be consistent but you need to be aware of the different terms</h3>
<ul>
<li><strong>Outcome</strong> <span class="math inline">\(=\)</span> response <span class="math inline">\(=\)</span> criterion <span class="math inline">\(=\)</span> dependent variable</li>
<li><strong>Predictor</strong> <span class="math inline">\(=\)</span> covariate <span class="math inline">\(=\)</span> independent variable <span class="math inline">\(=\)</span> factor</li>
<li><strong>Linear model</strong> <span class="math inline">\(=\)</span> regression analysis <span class="math inline">\(=\)</span> regression model <span class="math inline">\(=\)</span> multiple regression</li>
</ul>
</section>
<section id="lets-look-at-the-data-we-will-use" class="level3">
<h3 class="anchored" data-anchor-id="lets-look-at-the-data-we-will-use">Let’s look at the data we will use</h3>
<ul>
<li>First, we need to read the data into R</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>study.one.gen <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"study-one-general-participants.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Next, we should take a look at the data: you can open the data-set in Excel or you can use the <code>head</code> command to show the first few rows in</li>
<li>The person in row 1 has <code>ETHNICITY</code> White, is <code>AGE</code> 34 years, scored 33 on <code>Shipley</code> vocabulary, scored 7 on <code>HLVA</code> health literacy and, on average, self-rated their understanding of health information as 7.96 (<em>so</em> 8/9, <code>mean.self</code>) while scoring 0.49 accuracy in tests of understanding (49% <code>mean.acc</code>)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>study.one.gen <span class="sc">%&gt;%</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(mean.acc, mean.self, HLVA, SHIPLEY, AGE, ETHNICITY) <span class="sc">%&gt;%</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">head</span>(<span class="at">n =</span> <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 6
  mean.acc mean.self  HLVA SHIPLEY   AGE ETHNICITY
     &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;fct&gt;    
1     0.49      7.96     7      33    34 White    
2     0.85      7.28     7      33    25 White    
3     0.82      7.36     8      40    43 White    
4     0.94      7.88    11      33    46 White    </code></pre>
</div>
</div>
</section>
<section id="destination-correlation-where-the-correlation-number-comes-from" class="level3">
<h3 class="anchored" data-anchor-id="destination-correlation-where-the-correlation-number-comes-from">Destination correlation: where the correlation number comes from</h3>
<ul>
<li><strong>Covariance</strong></li>
</ul>
<p><span class="math display">\[COV_{xy} = \frac{\sum(x - \bar{x})(y - \bar{y})}{n -1}\]</span></p>
<ul>
<li>If we want to estimate the correlation between two sets of numbers: <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span></li>
<li>We want to know if variation in <span class="math inline">\(x\)</span> (given by <span class="math inline">\(x - \bar{x}\)</span>)</li>
<li>Varies together with variation in <span class="math inline">\(y\)</span> (given by <span class="math inline">\(y - \bar{y}\)</span>)</li>
</ul>
</section>
<section id="destination-correlation-where-the-correlation-number-comes-from-1" class="level3">
<h3 class="anchored" data-anchor-id="destination-correlation-where-the-correlation-number-comes-from-1">Destination correlation: where the correlation number comes from</h3>
<ul>
<li><strong>Covariance divided by standard deviations</strong></li>
</ul>
<p><span class="math display">\[r = \frac{COV_{xy}}{s_xs_y}\]</span></p>
<ul>
<li>Because the two sets of numbers can be on different scales: e.g., <code>SHIPLEY</code> out of 40; <code>mean.acc</code> (proportion, out of 1)</li>
<li>And because <em>covariance</em> values depend on the scales</li>
<li>To correlations easier to compare, we need to remove scale by dividing by the variables standard deviations</li>
</ul>
<!-- ## Correlation analyses and why we always visualize our data: the datasaurus -->
<!-- http://www.thefunctionalart.com/2016/08/download-datasaurus-never-trust-summary.html -->
<!-- ::: columns -->
<!-- ::: {.column width=".5"} -->
<!-- -   The correlation -->
<!-- ```{r, echo = FALSE, message=FALSE, warning=FALSE} -->
<!-- cor.test(datasaurus$A, datasaurus$B, method = "pearson") -->
<!-- ``` -->
<!-- -   The scatterplot -->
<!-- ::: -->
<!-- ::: {.column width=".5"} -->
<!-- ```{r, echo = FALSE, message=FALSE, warning=FALSE, fig.align='center', fig.width = 4, fig.height = 4, out.width='90%', fig.cap="The datasaurus: Alberto Cairo"} -->
<!-- datasaurus %>% -->
<!--   ggplot(aes(x = A, y = B)) + -->
<!--   geom_point() + -->
<!--   theme_bw() -->
<!-- ``` -->
<!-- ::: -->
<!-- ::: -->
</section>
<section id="lets-think-about-an-example-correlation" class="level3">
<h3 class="anchored" data-anchor-id="lets-think-about-an-example-correlation">Let’s think about an example correlation</h3>
<ul>
<li>Research question: Can people accurately evaluate whether they correctly understand written health information?</li>
<li>Measurement: Someone with higher scores on tested accuracy of understanding will also present higher scores on their ratings of their own understanding</li>
<li>Statistical prediction: We predict that <code>mean.acc</code> and <code>mean.self</code> scores will be associated</li>
<li>Test: If the prediction is correct, <code>mean.acc</code> and <code>mean.self</code> scores will be correlated</li>
</ul>
</section>
<section id="distributions-how-do-scores-vary" class="level3">
<h3 class="anchored" data-anchor-id="distributions-how-do-scores-vary">Distributions: How do scores vary?</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" href="">Plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false" href="">Notes</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="cell">
<div class="cell-output-display">
<div id="fig-study-one-gen-self-acc-histograms" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="visualization-intro_files/figure-html/fig-study-one-gen-self-acc-histograms-1.png" class="img-fluid figure-img" alt="There are two histograms, shown side by side: The 'mean accuracy' histogram shows how 'mean accuracy' scores vary between about 0.3 and 1.0, with a peak, indicated by a vertical red line, around .8; the 'mean self-rated accuracy' histogram shows how 'mean accuracy' scores vary between about 2.5 and 9.0, with a peak, indicated by a vertical red line, around 7." width="672"></p>
<figcaption class="figure-caption">Figure&nbsp;3: Histograms showing the distribution of mean accuracy and mean self-rated accuracy scores in the ‘study.one.gen’ data-set: means calculated for each participant over all their responses</figcaption>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb4-2"><a href="#cb4-2"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb4-3"><a href="#cb4-3"></a></span>
<span id="cb4-4"><a href="#cb4-4"></a>p.acc <span class="ot">&lt;-</span> study.one.gen <span class="sc">%&gt;%</span></span>
<span id="cb4-5"><a href="#cb4-5"></a>           <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> mean.acc)) <span class="sc">+</span> </span>
<span id="cb4-6"><a href="#cb4-6"></a>           <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> .<span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb4-7"><a href="#cb4-7"></a>           <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="fu">mean</span>(study.one.gen<span class="sc">$</span>mean.acc),</span>
<span id="cb4-8"><a href="#cb4-8"></a>                      <span class="at">size =</span> <span class="fl">1.5</span>, <span class="at">colour =</span> <span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb4-9"><a href="#cb4-9"></a>           <span class="fu">xlab</span>(<span class="st">"mean accuracy"</span>) <span class="sc">+</span></span>
<span id="cb4-10"><a href="#cb4-10"></a>           <span class="fu">xlim</span>(<span class="dv">0</span>, <span class="fl">1.1</span>) <span class="sc">+</span></span>
<span id="cb4-11"><a href="#cb4-11"></a>           <span class="fu">theme_bw</span>()</span>
<span id="cb4-12"><a href="#cb4-12"></a></span>
<span id="cb4-13"><a href="#cb4-13"></a>p.self <span class="ot">&lt;-</span> study.one.gen <span class="sc">%&gt;%</span></span>
<span id="cb4-14"><a href="#cb4-14"></a>           <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> mean.self)) <span class="sc">+</span> </span>
<span id="cb4-15"><a href="#cb4-15"></a>           <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb4-16"><a href="#cb4-16"></a>           <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="fu">mean</span>(study.one.gen<span class="sc">$</span>mean.self),</span>
<span id="cb4-17"><a href="#cb4-17"></a>                      <span class="at">size =</span> <span class="fl">1.5</span>, <span class="at">colour =</span> <span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb4-18"><a href="#cb4-18"></a>           <span class="fu">xlab</span>(<span class="st">"mean self-rated accuracy"</span>) <span class="sc">+</span></span>
<span id="cb4-19"><a href="#cb4-19"></a>           <span class="fu">xlim</span>(<span class="dv">0</span>, <span class="dv">10</span>) <span class="sc">+</span></span>
<span id="cb4-20"><a href="#cb4-20"></a>           <span class="fu">theme_bw</span>()</span>
<span id="cb4-21"><a href="#cb4-21"></a></span>
<span id="cb4-22"><a href="#cb4-22"></a>p.acc <span class="sc">+</span> p.self</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s go through the code step-by-step.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>Here the code is broken down, line by line, and each line is numbered.</li>
<li>This presentation style is done to make it easier for you to see what each step is doing.</li>
<li>Notice that when we use <code>p.acc &lt;- study.one.gen</code> we tell R to first create the plot (giving it the name <code>p.acc</code>) but to not show it <em>yet</em>.</li>
</ul>
</div>
</div>
<ol type="1">
<li><code>library(patchwork)</code> and <code>library(tidyverse)</code>: We need to use {tidyverse} library functions to construct the plots and {patchwork} library functions to assemble the plots into a grid showing the plots next to each other. We use the <code>library()</code> function to get these libraries.</li>
<li>We construct two plots. We call the plots <code>p.acc</code> and <code>p.self</code>. Each plot is constructed in a similar way so we explain the main steps for one plot. The plots are constructed but not shown until the last line of code is run.</li>
<li><code>p.acc &lt;- ...</code> creates a plot called <code>p.acc</code>, using the processes that are specified in the next lines of code that follow.</li>
<li><code>... &lt;- study.one.gen</code> tells R that we are working with the data-set <code>study.one.gen</code> that we read in earlier.</li>
<li><code>%&gt;%</code> is called the <code>pipe</code> and it is code telling R to work with the <code>study.one.gen</code> data in the next plot processing steps.</li>
<li><code>ggplot(aes(x = mean.acc)) +</code> takes the <code>study.one.gen</code> data and asks R to use the <code>ggplot()</code> function to produce a plot.</li>
<li><code>aes(x = mean.acc)</code> tells R that in the plot we want it to show the <code>mean.acc</code> variable values as locations on the x-axis: this is the <em>aesthetic mapping</em>.</li>
<li><code>geom_histogram(binwidth = .1) +</code> tells R to produce a histogram then add a step, next.</li>
<li><code>geom_vline(...) +</code> tells R we want to draw a vertical line.</li>
<li><code>xintercept = mean(study.one.gen$mean.acc), ...</code> tells R to draw the vertical line at the mean value of the variable <code>mean.acc</code> in the <code>study.one.gen</code> data-set.</li>
<li><code>size = 1.5, colour = "red"</code> tells R we want the vertical line to be red, and 1.5 times the usual size.</li>
<li><code>xlab("mean accuracy") +</code> tells R we want the x-axis label to say that the plot is of <code>"mean accuracy"</code>.</li>
<li><code>xlim(0, 1.1) +</code> sets limits on the minimum and maximum <code>mean accuracy</code> values shown in the plot.</li>
<li><code>theme_bw()</code> lastly, we change the theme.</li>
<li>Then we have code to construct the second plot <code>p.self</code>.</li>
<li><code>p.acc + p.self</code>: tells R to put the two plots together so they appear side-by-side in a grid for easy comparison.</li>
</ol>
<p>In using pipes in the code, I am structuring the code so that it works — and is presented — in a sequence of steps. There are different ways to write code but I find this way easier to work with and to read and I think you will too.</p>
<p>What you can see is that each line ending in a <code>%&gt;</code> pipe passes something on to the next line. A following line takes the output of the process coded in the preceding line, and works with it.</p>
<p>Each step is executed in turn, in strict sequence. This means that if I delete the line <code>study.one.gen %&gt;%</code> then the following lines cannot work because the <code>ggplot()</code> function will be looking for a variable <code>average</code> that does not yet exist.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>You can see that in the data processing part of the code, successive steps in data processing end in a pipe <code>%&gt;%</code>.</li>
<li>In contrast, successive steps of the plotting code add <code>ggplot</code> elements line by line with each line (except the last) ending in a <code>+</code>.</li>
</ul>
</div>
</div>
<p>Notice that none of the processing steps actually changes the dataset called <code>study.one.gen</code>. The results of the process exist and can be used only within the sequence of steps coded to produce the plots.</p>
<ul>
<li>You can read a clear explanation of pipes <a href="https://r4ds.had.co.nz/pipes.html" class="external" target="_blank">here</a>.</li>
<li>You can read about the new <code>geom_vline()</code> <a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external" target="_blank">here</a>.</li>
</ul>
</div>
</div>
</div>
</section>
<section id="a-histogram-is-a-useful-way-to-show-the-distribution-of-values" class="level3">
<h3 class="anchored" data-anchor-id="a-histogram-is-a-useful-way-to-show-the-distribution-of-values">A histogram is a useful way to show the distribution of values</h3>
<ul>
<li>We have a sample of accuracy scores:</li>
<li>Mean accuracy scores vary between 0.0 and 1.0</li>
<li>We draw the plot by grouping together similar values in bins</li>
<li>Heights of bars represent numbers of cases with similar values in same bin</li>
</ul>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true" href="">Plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false" href="">Notes</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-study-one-gen-acc-histograms-case" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="visualization-intro_files/figure-html/fig-study-one-gen-acc-histograms-case-1.png" class="img-fluid figure-img" alt="The 'mean accuracy' histogram shows how 'mean accuracy' scores vary between about 0.3 and 1.0, with a peak, indicated by a vertical red line, around .8." width="480"></p>
<figcaption class="figure-caption">Figure&nbsp;4: Distribution of mean accuracy</figcaption>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>study.one.gen <span class="sc">%&gt;%</span></span>
<span id="cb5-2"><a href="#cb5-2"></a>           <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> mean.acc)) <span class="sc">+</span> </span>
<span id="cb5-3"><a href="#cb5-3"></a>           <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> .<span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb5-4"><a href="#cb5-4"></a>           <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="fu">mean</span>(study.one.gen<span class="sc">$</span>mean.acc),</span>
<span id="cb5-5"><a href="#cb5-5"></a>                      <span class="at">size =</span> <span class="fl">1.5</span>, <span class="at">colour =</span> <span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb5-6"><a href="#cb5-6"></a>           <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x =</span> <span class="fl">0.6</span>, <span class="at">y =</span> <span class="dv">60</span>,</span>
<span id="cb5-7"><a href="#cb5-7"></a>                    <span class="at">colour =</span> <span class="st">"red"</span>,</span>
<span id="cb5-8"><a href="#cb5-8"></a>                    <span class="at">label =</span> <span class="st">"average value</span><span class="sc">\n</span><span class="st">shown in red"</span>) <span class="sc">+</span></span>
<span id="cb5-9"><a href="#cb5-9"></a>           <span class="fu">xlab</span>(<span class="st">"mean accuracy"</span>) <span class="sc">+</span></span>
<span id="cb5-10"><a href="#cb5-10"></a>           <span class="fu">xlim</span>(<span class="dv">0</span>, <span class="fl">1.1</span>) <span class="sc">+</span></span>
<span id="cb5-11"><a href="#cb5-11"></a>           <span class="fu">theme_bw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We go through the code line by line. It will be useful to identify some differences between this chunk of code and the previous chunk of code.</p>
<ol type="1">
<li>We are going to use {tidyverse} library functions to construct the plots and {patchwork} library functions to assemble the plots into a grid. I assume you have already run the <code>library()</code> function to get these libraries. We do not need to do it again in the same R session.</li>
<li>We construct one plot here. We do not give it a name. Run the code and R will show the plot in the plot window immediately.</li>
<li><code>study.one.gen %&gt;%</code> tells R that we are working with the data-set <code>study.one.gen</code> that we read in earlier.</li>
<li><code>%&gt;%</code> is the <code>pipe</code> and it is code telling R to work with the <code>study.one.gen</code> data in the next plot processing steps.</li>
<li><code>ggplot(aes(x = mean.acc)) +</code> takes the <code>study.one.gen</code> data and asks R to use the <code>ggplot()</code> function to produce a plot.</li>
<li><code>aes(x = mean.acc)</code> tells R that in the plot we want it to show the <code>mean.acc</code> variable values as locations on the x-axis: this is the <em>aesthetic mapping</em>.</li>
<li><code>geom_histogram(binwidth = .1) +</code> tells R to produce a histogram then add a step, next.</li>
<li><code>geom_vline(...) +</code> tells R we want to draw a vertical line.</li>
<li><code>xintercept = mean(study.one.gen$mean.acc), ...</code> tells R to draw the vertical line at the mean value of the variable <code>mean.acc</code> in the <code>study.one.gen</code> data-set.</li>
<li><code>size = 1.5, colour = "red"</code> tells R we want the vertical line to be red, and 1.5 times the usual size.</li>
<li><code>annotate("text", ...</code>** tells R to write some text.</li>
<li><code>x = 0.6, y = 60</code>** tells R where to write the text.</li>
<li><code>colour = "red"</code>** tells R what colour to write the text.</li>
<li><code>label = "average value\nshown in red"</code>** tells R what text to write.</li>
<li><code>xlab("mean accuracy") +</code> tells R we want the x-axis label to say that the plot is about <code>"mean accuracy"</code>.</li>
<li><code>xlim(0, 1.1) +</code> sets limits on the minimum and maximum <code>mean accuracy</code> values shown in the plot.</li>
<li><code>theme_bw()</code> lastly, we change the theme.</li>
</ol>
<ul>
<li>You can read about the new <code>annotate()</code> function <a href="https://ggplot2.tidyverse.org/reference/annotate.html" class="external" target="_blank">here</a>.</li>
</ul>
</div>
</div>
</div>
</section>
<section id="when-we-talk-about-variance-we-are-talking-about-how-values-vary-in-relation-to-the-mean-for-the-sample" class="level3">
<h3 class="anchored" data-anchor-id="when-we-talk-about-variance-we-are-talking-about-how-values-vary-in-relation-to-the-mean-for-the-sample">When we talk about variance we are talking about how values vary in relation to the mean for the sample</h3>
<ul>
<li>The average of these <em>mean accuracy</em> scores is marked with a red line where <span class="math inline">\(\bar{x} =\)</span> 0.8</li>
<li>The accuracy score for the person in row 1 is located at <span class="math inline">\(x = .49\)</span>, marked in blue</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-study-one-gen-acc-histograms-one-case" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="visualization-intro_files/figure-html/fig-study-one-gen-acc-histograms-one-case-1.png" class="img-fluid figure-img" alt="The 'mean accuracy' histogram shows how 'mean accuracy' scores vary between about 0.3 and 1.0, with the average of mean accuracy scores, indicated by a vertical red line located near .8, and the score of the person in row 1 of the data-set, indicated by a blue line located at .49." width="480"></p>
<figcaption class="figure-caption">Figure&nbsp;5: Distribution of mean accuracy</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="we-are-talking-about-how-values-vary-in-relation-to-the-mean-for-the-sample" class="level3">
<h3 class="anchored" data-anchor-id="we-are-talking-about-how-values-vary-in-relation-to-the-mean-for-the-sample">We are talking about how values vary in relation to the mean for the sample</h3>
<ul>
<li>In comparison, the mean accuracy score for the person in row 4 is located at <span class="math inline">\(x = .94\)</span>, marked in blue</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-study-one-gen-acc-histograms-another-case" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="visualization-intro_files/figure-html/fig-study-one-gen-acc-histograms-another-case-1.png" class="img-fluid figure-img" alt="The 'mean accuracy' histogram shows how 'mean accuracy' scores vary between about 0.3 and 1.0, with the average of mean accuracy scores, indicated by a vertical red line located near .8, and the score of the person in row 4 of the data-set, indicated by a blue line located at .94." width="480"></p>
<figcaption class="figure-caption">Figure&nbsp;6: Distribution of mean accuracy</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="the-basic-question-when-we-examine-covariance-do-values-vary-together" class="level3">
<h3 class="anchored" data-anchor-id="the-basic-question-when-we-examine-covariance-do-values-vary-together">The basic question when we examine covariance: do values vary <em>together</em>?</h3>
<ul>
<li>If the person at row 1 has a <code>mean.accuracy</code> score of .49, lower than the average</li>
<li>And the person at row 4 has a <code>mean.accuracy</code> score of .94, higher than the average</li>
<li>What will their <code>mean.self</code> scores be: will <em>they</em> be higher or lower than the average <code>mean.self</code> score?</li>
</ul>
</section>
<section id="we-can-use-scatterplots-to-examine-associations" class="level3">
<h3 class="anchored" data-anchor-id="we-can-use-scatterplots-to-examine-associations">We can use scatterplots to examine associations</h3>
<ul>
<li>Is variation in the mean accuracy of understanding (of health information) associated with variation in mean self-rated accuracy of understanding?</li>
</ul>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true" href="">Plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false" href="">Notes</a></li></ul>
<div class="tab-content">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<div class="cell">
<div class="cell-output-display">
<div id="fig-study-one-gen-scatter-acc-self-grid" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="visualization-intro_files/figure-html/fig-study-one-gen-scatter-acc-self-grid-1.png" class="img-fluid figure-img" alt="The figure shows two scatterplots, side by side: both plots show points where each point indicates the pair of scores corresponding to the 'mean accuracy' and the 'mean self-rated accuracy' recorded for each participant in the example data. The plot on the left orients the presentation with 'mean accuracy' on the y axis. The plot on the right orients the presentation with 'mean self-rated accuracy' on the y axis." width="672"></p>
<figcaption class="figure-caption">Figure&nbsp;7: Scatterplots showing whether values on mean accuracy (<code>mean.acc</code>) vary together with values on mean self-rated accuracy (<code>mean.self</code>) for the participants in this sample</figcaption>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>p.acc <span class="ot">&lt;-</span> study.one.gen <span class="sc">%&gt;%</span></span>
<span id="cb6-2"><a href="#cb6-2"></a>           <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> mean.self, <span class="at">y =</span> mean.acc)) <span class="sc">+</span></span>
<span id="cb6-3"><a href="#cb6-3"></a>           <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>, <span class="at">alpha =</span> .<span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb6-4"><a href="#cb6-4"></a>           <span class="fu">ylab</span>(<span class="st">"mean accuracy"</span>) <span class="sc">+</span></span>
<span id="cb6-5"><a href="#cb6-5"></a>           <span class="fu">xlab</span>(<span class="st">"mean self-rated accuracy"</span>) <span class="sc">+</span></span>
<span id="cb6-6"><a href="#cb6-6"></a>           <span class="fu">xlim</span>(<span class="dv">0</span>, <span class="dv">10</span>) <span class="sc">+</span> <span class="fu">ylim</span>(<span class="dv">0</span>, <span class="fl">1.1</span>) <span class="sc">+</span></span>
<span id="cb6-7"><a href="#cb6-7"></a>           <span class="fu">theme_bw</span>()</span>
<span id="cb6-8"><a href="#cb6-8"></a></span>
<span id="cb6-9"><a href="#cb6-9"></a>p.self <span class="ot">&lt;-</span> study.one.gen <span class="sc">%&gt;%</span></span>
<span id="cb6-10"><a href="#cb6-10"></a>           <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> mean.self, <span class="at">x =</span> mean.acc)) <span class="sc">+</span></span>
<span id="cb6-11"><a href="#cb6-11"></a>           <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>, <span class="at">alpha =</span> .<span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb6-12"><a href="#cb6-12"></a>           <span class="fu">xlab</span>(<span class="st">"mean accuracy"</span>) <span class="sc">+</span></span>
<span id="cb6-13"><a href="#cb6-13"></a>           <span class="fu">ylab</span>(<span class="st">"mean self-rated accuracy"</span>) <span class="sc">+</span></span>
<span id="cb6-14"><a href="#cb6-14"></a>           <span class="fu">ylim</span>(<span class="dv">0</span>, <span class="dv">10</span>) <span class="sc">+</span> <span class="fu">xlim</span>(<span class="dv">0</span>, <span class="fl">1.1</span>) <span class="sc">+</span></span>
<span id="cb6-15"><a href="#cb6-15"></a>           <span class="fu">theme_bw</span>()</span>
<span id="cb6-16"><a href="#cb6-16"></a></span>
<span id="cb6-17"><a href="#cb6-17"></a>p.acc <span class="sc">+</span> p.self</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol type="1">
<li>We are going to use {tidyverse} library functions to construct the plots and {patchwork} library functions to assemble the plots into a grid. I assume you have already run the <code>library()</code> function to get these libraries. We do not need to do it again in the same R session.</li>
<li>We construct two plots. We call the plots <code>p.acc</code> and <code>p.self</code> <em>again</em>. Each plot is constructed in a similar way so we explain the main steps for one plot. The plots are constructed but not shown until the last line of code is run.</li>
<li><code>p.acc &lt;- ...</code> creates a plot called <code>p.acc</code>, using the processes that are specified in the next lines of code that follow.</li>
<li><code>... &lt;- study.one.gen</code> tells R that we are working with the data-set <code>study.one.gen</code> that we read in earlier.</li>
<li><code>%&gt;%</code> is called the <code>pipe</code> and it is code telling R to work with the <code>study.one.gen</code> data in the next plot processing steps.</li>
<li><code>ggplot(...) +</code> takes the <code>study.one.gen</code> data and asks R to use the <code>ggplot()</code> function to produce a plot.</li>
<li><code>aes(x = mean.self, ...)</code> tells R that in the plot we want it to show the <code>mean.self</code> variable values as horizontal (left to right) locations on the x-axis: this is one <em>aesthetic mapping</em>.</li>
<li><code>aes(... , y = mean.acc)</code> tells R that in the plot we want it to show the <code>mean.acc</code> variable values as vertical (low to high) locations on the y-axis: this is the second <em>aesthetic mapping</em>.</li>
<li><code>aes(x = mean.self, y = mean.acc)</code> thus encodes two aesthetic mappings, telling R the position of the things it will draw (it will draw points, next): the vertical height, and the horizontal left-to-right position.</li>
<li><code>geom_point(...)</code> tells R to produce a scatterplot, representing data values as points.</li>
<li><code>size = 2, alpha = .5</code> tells R we want the points to be 2 times the usual size with <code>size = 2</code>, and half the usual level of opacity (i.e.&nbsp;how solid the colour is) with <code>alpha = .5</code>.</li>
<li><code>ylab("mean accuracy") +</code> tells R we want the y-axis label to say that the plot is of <code>"mean accuracy"</code>.</li>
<li><code>xlab("mean self-rated accuracy") +</code> tells R we want the y-axis label to say that the plot is of <code>"mean self-rated accuracy"</code>.</li>
<li><code>ylim(0, 10) + xlim(0, 1.1) +</code> sets limits on the minimum and maximum <code>mean accuracy</code> and <code>mean self-rated accuracy</code> values shown in the plot.</li>
<li><code>theme_bw()</code> changes the theme.</li>
<li>Then we have code to construct the second plot <code>p.self</code>.</li>
<li><code>p.acc + p.self</code>: tells R to put the two plots together so they appear side-by-side in a grid for easy comparison.</li>
</ol>
<ul>
<li>You can read about the <code>geom_point()</code> function <a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external" target="_blank">here</a>.</li>
</ul>
</div>
</div>
</div>
</section>
<section id="a-scatterplot-is-a-useful-way-to-examine-if-the-values-of-two-or-more-variables-vary-together" class="level3">
<h3 class="anchored" data-anchor-id="a-scatterplot-is-a-useful-way-to-examine-if-the-values-of-two-or-more-variables-vary-together">A scatterplot is a useful way to examine if the values of two or more variables vary together</h3>
<ol type="1">
<li>Mean accuracy scores vary between 0.0 and 1.0</li>
</ol>
<ul>
<li>The height of each point shows the observed value of accuracy on the y-axis</li>
</ul>
<ol start="2" type="1">
<li>Self-rated accuracy scores vary between 1 and 9</li>
</ol>
<ul>
<li>The horizontal position of each point shows the observed value of self-rated accuracy on the x-axis</li>
</ul>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-4-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-1" role="tab" aria-controls="tabset-4-1" aria-selected="true" href="">Plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-2" role="tab" aria-controls="tabset-4-2" aria-selected="false" href="">Notes</a></li></ul>
<div class="tab-content">
<div id="tabset-4-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-4-1-tab">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-study-one-gen-scatter-acc-self-single" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="visualization-intro_files/figure-html/fig-study-one-gen-scatter-acc-self-single-1.png" class="img-fluid figure-img" alt="The figure shows a scatterplot showing points where each point indicates the pair of scores corresponding to the 'mean accuracy' and the 'mean self-rated accuracy' recorded for each participant in the example data. The plot orients the presentation with 'mean accuracy' on the y axis." width="480"></p>
<figcaption class="figure-caption">Figure&nbsp;8: Scatterplot showing how values on mean accuracy and mean self-rated accuracy vary together</figcaption>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-4-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>study.one.gen <span class="sc">%&gt;%</span></span>
<span id="cb7-2"><a href="#cb7-2"></a>           <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> mean.self, <span class="at">y =</span> mean.acc)) <span class="sc">+</span></span>
<span id="cb7-3"><a href="#cb7-3"></a>           <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>, <span class="at">alpha =</span> .<span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb7-4"><a href="#cb7-4"></a>           <span class="fu">ylab</span>(<span class="st">"mean accuracy"</span>) <span class="sc">+</span></span>
<span id="cb7-5"><a href="#cb7-5"></a>           <span class="fu">xlab</span>(<span class="st">"mean self-rated accuracy"</span>) <span class="sc">+</span></span>
<span id="cb7-6"><a href="#cb7-6"></a>           <span class="fu">xlim</span>(<span class="dv">0</span>, <span class="dv">10</span>) <span class="sc">+</span> <span class="fu">ylim</span>(<span class="dv">0</span>, <span class="fl">1.1</span>) <span class="sc">+</span></span>
<span id="cb7-7"><a href="#cb7-7"></a>           <span class="fu">theme_bw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We use mostly the same code to draw <a href="#fig-study-one-gen-scatter-acc-self-single">Figure&nbsp;8</a>, compared to the code we used to draw <a href="#fig-study-one-gen-scatter-acc-self-grid">Figure&nbsp;7</a>, but there is one difference. I do not walk through every line of code, here, but highlight the difference.</p>
<ol type="1">
<li>We construct one plot here. We do not give it a name. Run the code and R will show the plot in the plot window immediately.</li>
<li><code>study.one.gen %&gt;%</code> tells R that we are working with the data-set <code>study.one.gen</code> that we read in earlier.</li>
<li><code>ggplot(aes(x = mean.self, y = mean.acc)) +</code> takes the <code>study.one.gen</code> data and asks R to use the <code>ggplot()</code> function to produce a plot.</li>
<li><code>aes(x = mean.self, y = mean.acc)</code> thus encodes two aesthetic mappings, telling R the position of the things it will draw (it will draw points, next): the vertical height, and the horizontal left-to-right position.</li>
</ol>
</div>
</div>
</div>
<p>We can focus in one point, showing the data for one person.</p>
<ul>
<li>We have a sample of 170 people</li>
<li>For each person, we have a value for the mean accuracy and a <em>paired</em> value for the mean self-rated accuracy</li>
<li>Each point shows the paired data values for a person</li>
<li>In red: someone scored 3.48 on mean self-rated accuracy, 0.57 on mean accuracy</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-study-one-gen-scatter-acc-self-single-highlighted" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="visualization-intro_files/figure-html/fig-study-one-gen-scatter-acc-self-single-highlighted-1.png" class="img-fluid figure-img" alt="The figure shows a scatterplot showing points where each point indicates the pair of scores corresponding to the 'mean accuracy' and the 'mean self-rated accuracy' recorded for each participant in the example data. The plot orients the presentation with 'mean accuracy' on the y axis." width="480"></p>
<figcaption class="figure-caption">Figure&nbsp;9: Scatterplot showing how values on mean accuracy and mean self-rated accuracy vary together</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="the-r-code-for-a-correlation-test-bit-by-bit" class="level3">
<h3 class="anchored" data-anchor-id="the-r-code-for-a-correlation-test-bit-by-bit">The R code for a correlation test, bit by bit</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="fu">cor.test</span>(study.one.gen<span class="sc">$</span>mean.acc,</span>
<span id="cb8-2"><a href="#cb8-2"></a>         study.one.gen<span class="sc">$</span>mean.self,</span>
<span id="cb8-3"><a href="#cb8-3"></a>         <span class="at">method =</span> <span class="st">"pearson"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol type="1">
<li>We specify the <code>cor.test</code> function, and name one variable <code>study.one.gen$mean.acc</code></li>
<li>Then we name the second variable <code>study.one.gen$mean.self</code></li>
<li>Last we specify the correlation <code>method = "pearson"</code> because we have a choice (we can apply other methods to estimate the correlation, e.g., <em>Spearmans</em>)</li>
</ol>
</section>
<section id="identifying-the-key-information-in-the-results-from-one-correlation-test" class="level3 smaller">
<h3 class="smaller anchored" data-anchor-id="identifying-the-key-information-in-the-results-from-one-correlation-test">Identifying the key information in the results from one correlation test</h3>
<ul>
<li>We look at the value of the correlation (here, <code>cor</code>) and the p-value</li>
<li>We can see that the correlation statistic is positive <code>cor = .4863771</code> which we round to <span class="math inline">\(cor = .49\)</span></li>
<li>And <code>p-value = 2.026e-11</code> indicating that the correlation is <em>significant</em> <span class="math inline">\(p &lt; .001\)</span></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.test</span>(study.one.gen<span class="sc">$</span>mean.acc,</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>         study.one.gen<span class="sc">$</span>mean.self,</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">method =</span> <span class="st">"pearson"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Pearson's product-moment correlation

data:  study.one.gen$mean.acc and study.one.gen$mean.self
t = 7.1936, df = 167, p-value = 2.026e-11
alternative hypothesis: true correlation is not equal to 0
95 percent confidence interval:
 0.3619961 0.5937425
sample estimates:
      cor 
0.4863771 </code></pre>
</div>
</div>
</section>
<section id="reporting-a-correlation" class="level3">
<h3 class="anchored" data-anchor-id="reporting-a-correlation">Reporting a correlation</h3>
<ul>
<li>Usually, we report a correlation like this:</li>
</ul>
<blockquote class="blockquote">
<p>Mean accuracy and mean self-rated accuracy were significantly correlated (<span class="math inline">\(r (167 \text{ df}) = .49, p &lt; .001\)</span>). Higher mean accuracy scores are associated with higher mean self-rated accuracy scores.</p>
</blockquote>
</section>
<section id="interpreting-correlations-with-the-help-of-visualization" class="level3 smaller">
<h3 class="smaller anchored" data-anchor-id="interpreting-correlations-with-the-help-of-visualization">Interpreting correlations with the help of visualization</h3>
<ul>
<li>The correlation statistic is positive in sign and moderate in size, about <span class="math inline">\(r = .49\)</span></li>
<li>We can see that higher mean accuracy (<code>mean.acc</code>) scores are associated with higher mean self-rated accuracy (<code>mean.self</code>) scores</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-study-one-gen-scatter-acc-self-single-repeat-1" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="visualization-intro_files/figure-html/fig-study-one-gen-scatter-acc-self-single-repeat-1-1.png" class="img-fluid figure-img" alt="The figure shows a scatterplot showing points where each point indicates the pair of scores corresponding to the 'mean accuracy' and the 'mean self-rated accuracy' recorded for each participant in the example data. The plot orients the presentation with 'mean accuracy' on the y axis." width="480"></p>
<figcaption class="figure-caption">Figure&nbsp;10: Scatterplot showing how values on mean accuracy and mean self-rated accuracy vary together</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="what-will-different-kinds-of-correlations-look-like" class="level3">
<h3 class="anchored" data-anchor-id="what-will-different-kinds-of-correlations-look-like">What will different kinds of correlations look like?</h3>
<p>We can simulate data to demonstrate [what scatterplots look like if]: <strong>(left)</strong> the correlation is positive, <span class="math inline">\(r = .5\)</span>; <strong>(right)</strong> the correlation is negative, <span class="math inline">\(r = -.5\)</span></p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-study-one-gen-scatter-acc-self-grid-simulated-signs" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="visualization-intro_files/figure-html/fig-study-one-gen-scatter-acc-self-grid-simulated-signs-1.png" class="img-fluid figure-img" alt="The figure shows two scatterplots showing how simulated data values on mean accuracy and mean self-rated accuracy *could* vary together given positive or negative correlations. Each plot shows points, where each point indicates the pair of scores corresponding to the 'mean accuracy' and the 'mean self-rated accuracy' recorded for each participant in a simulated data-set. The plot on the left shows the scatter of points when data are simulated assuming r = .5. The plot on the left shows the scatter of points when data are simulated assuming r = -.5." width="672"></p>
<figcaption class="figure-caption">Figure&nbsp;11: Scatterplots showing how simulated data values on mean accuracy and mean self-rated accuracy <em>could</em> vary together given positive or negative correlations</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="we-can-also-imagine-again-with-simulated-data-what-correlations-of-increasing-size-might-look-like" class="level3">
<h3 class="anchored" data-anchor-id="we-can-also-imagine-again-with-simulated-data-what-correlations-of-increasing-size-might-look-like">We can also imagine – again with simulated data – what correlations of increasing size might look like</h3>
<ul>
<li>Notice how, as you compare the plots, going from left to right</li>
<li>As the correlation increases, the points cluster together more closely</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-study-one-gen-scatter-acc-self-grid-simulated-sizes" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="visualization-intro_files/figure-html/fig-study-one-gen-scatter-acc-self-grid-simulated-sizes-1.png" class="img-fluid figure-img" alt="The figure shows 4 scatterplots showing how simulated data values on mean accuracy and mean self-rated accuracy *could* vary together given positive correlations of increasing size. Each plot shows points, where each point indicates the pair of scores corresponding to the 'mean accuracy' and the 'mean self-rated accuracy' recorded for each participant in a simulated data-set. The plots show the scatter of points, from left to right, (1.) if r - .1; (2.) if r = .3; (3.) if r = .5; (4.) if r = .8" width="960"></p>
<figcaption class="figure-caption">Figure&nbsp;12: Scatterplots showing how simulated data values on mean accuracy and mean self-rated accuracy <em>could</em> vary together given positive correlations of increasing size</figcaption>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="summary" class="level2">
<h2 class="anchored" data-anchor-id="summary">Summary</h2>
<ul>
<li>We are often interested in whether or how variation in the values of two variables are associated</li>
<li>We can visualize the distribution of values in any one variable using histograms</li>
<li>We visualize the association of values in two variables using scatterplots</li>
<li>We conduct correlation tests to examine the sign (positive or negative) and the strength of the association</li>
<li>But we always need to think about our research questions, about where our data come from and about whether our measures are any good</li>
</ul>
<section id="look-ahead-growing-in-independence" class="level3">
<h3 class="anchored" data-anchor-id="look-ahead-growing-in-independence">Look ahead: growing in independence</h3>
<ul>
<li>Every problem you ever have: someone has had it before, solved it, and written a blog (or tweet or toot) about it</li>
</ul>
</section>
<section id="look-ahead-the-revolution-in-knowledge-and-you" class="level3">
<h3 class="anchored" data-anchor-id="look-ahead-the-revolution-in-knowledge-and-you">Look ahead: the revolution in knowledge and you</h3>
<ul>
<li>R is <em>free open statistical software</em>: everything you use is contributed, discussed and taught by a community of R users online, in open forums</li>
<li>Learning to navigate this knowledge is an introduction to the future of knowledge sharing</li>
</ul>
</section>
</section>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>We write the slides and this book in <a href="https://quarto.org" target="_blank">Quarto</a> in R-Studio. Quarto scripts can be rendered as .html to share web-books like this one, or to share slides like those we use in presenting the lecture. One advantage of using Quarto is that we can share a plot and the code we used to generate the plot in the same page.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>